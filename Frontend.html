<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Diezus - Sistema Integral 2025</title>
    <style>
        :root {
            --accent: #ff007f;
            --main-bg: linear-gradient(135deg, #ff75c3, #702283, #000000);
        }
        
        body, html { margin: 0; padding: 0; height: 100%; font-family: 'Segoe UI', sans-serif; color: white; overflow: hidden; }

        .main-wrapper {
            height: 100vh; width: 100%;
            background: var(--main-bg);
            background-size: 400% 400%; animation: gradientBG 15s ease infinite;
            display: flex; justify-content: center; align-items: center;
            transition: background 0.8s ease;
        }
        @keyframes gradientBG { 0% { background-position: 0% 50%; } 50% { background-position: 100% 50%; } 100% { background-position: 0% 50%; } }

        .container-box {
            text-align: center; background: rgba(0, 0, 0, 0.8); padding: 30px 40px;
            border-radius: 25px; backdrop-filter: blur(15px); border: 2px solid var(--accent);
            width: 420px; box-shadow: 0 20px 50px rgba(0,0,0,0.7); z-index: 10;
        }

        #chat-interface {
            display: none; width: 100%; height: 100vh; flex-direction: column;
            background: var(--main-bg); position: relative;
            transition: background 0.8s ease;
        }

        .menu-container { position: absolute; top: 20px; left: 20px; z-index: 1000; }
        .exit-container { position: absolute; top: 20px; right: 20px; z-index: 1000; }
        
        .menu-btn { background: rgba(0,0,0,0.5); border: 2px solid var(--accent); color: white; padding: 10px 20px; cursor: pointer; border-radius: 20px; backdrop-filter: blur(5px); }
        
        .menu-content {
            display: none; position: absolute; left: 0; background: white; min-width: 280px;
            box-shadow: 0px 8px 16px rgba(0,0,0,0.5); border-radius: 15px; padding: 15px; margin-top: 10px; color: #333;
            max-height: 75vh; overflow-y: auto; border: 3px solid var(--accent);
        }

        .menu-content h4 { margin: 15px 0 5px; border-bottom: 1px solid #ddd; color: var(--accent); text-transform: uppercase; font-size: 12px; }
        .menu-content p { font-size: 13px; margin: 8px 0; color: #444; text-align: left; }

        /* Botones de juegos fijos en negro */
        .btn-game { background: #000 !important; color: white !important; border: 1px solid #333; }

        .hidden { display: none !important; }
        
        input, select {
            width: 100%; padding: 12px; background: #000; color: white; border: 2px solid var(--accent);
            border-radius: 30px; text-align: center; outline: none; margin-bottom: 10px; box-sizing: border-box;
        }
        
        .btn {
            padding: 10px; color: white; border: none; border-radius: 30px; font-weight: bold;
            cursor: pointer; width: 100%; background: var(--accent);
            margin-top: 5px; text-transform: uppercase; transition: 0.3s; font-size: 11px;
        }

        #chat-window { flex: 1; overflow-y: auto; padding: 80px 20px 20px; display: flex; flex-direction: column; gap: 15px; }
        .msg { max-width: 80%; padding: 12px 18px; border-radius: 20px; font-size: 15px; line-height: 1.4; border: 1px solid rgba(255,255,255,0.1); }
        .ai-msg { align-self: flex-start; background: rgba(255, 255, 255, 0.9); color: #333; }
        .user-msg { align-self: flex-end; background: var(--accent); color: white; font-weight: bold; }

        .input-area { padding: 20px; background: rgba(0,0,0,0.6); display: flex; gap: 10px; backdrop-filter: blur(10px); border-top: 1px solid var(--accent); }
        .input-area input { flex: 1; margin-bottom: 0; text-align: left; padding-left: 20px; }
    </style>
</head>
<body>

<div class="main-wrapper" id="auth-screen">
    <div class="container-box">
        <h1>DIEZUS AI</h1>
        <div id="login-view">
            <input type="text" id="log-user" placeholder="Correo o Usuario">
            <input type="password" id="log-pass" placeholder="Contraseña">
            <button class="btn" onclick="attemptLogin()">Entrar</button>
            <button class="btn" style="background:transparent; border:1px solid white" onclick="showRegister()">Registro</button>
        </div>

        <div id="register-view" class="hidden">
            <div id="reg-step-1">
                <label>Nombre</label>
                <input type="text" id="reg-name">
                <button class="btn" onclick="validateStep(1, 2)">Siguiente</button>
            </div>
            <div id="reg-step-2" class="hidden">
                <label>Edad y Sexo</label>
                <input type="number" id="reg-age" placeholder="Edad">
                <select id="reg-sex">
                    <option value="">Sexo...</option>
                    <option value="Femenino">Femenino</option>
                    <option value="Masculino">Masculino</option>
                </select>
                <button class="btn" onclick="validateStep(2, 3)">Siguiente</button>
            </div>
            <div id="reg-step-3" class="hidden">
                <label>Contacto</label>
                <input type="email" id="reg-email" placeholder="correo@ejemplo.com">
                <input type="tel" id="reg-tel" placeholder="Teléfono">
                <button class="btn" onclick="validateStep(3, 4)">Siguiente</button>
            </div>
            <div id="reg-step-4" class="hidden">
                <label>Seguridad</label>
                <input type="password" id="reg-p1" placeholder="Clave">
                <input type="password" id="reg-p2" placeholder="Confirmar">
                <button class="btn" onclick="finishRegister()">Finalizar</button>
            </div>
            <button class="btn" style="background:#444; margin-top:15px" onclick="location.reload()">Cancelar</button>
        </div>
    </div>
</div>

<div id="chat-interface">
    <div class="menu-container">
        <button class="menu-btn" onclick="toggleMenu()">Opciones ☰</button>
        <div id="menu-dropdown" class="menu-content">
            <h4>Perfil Personal</h4>
            <p id="m-nombre"></p><p id="m-edad"></p><p id="m-sexo"></p><p id="m-tel"></p><p id="m-correo"></p>
            
            <h4>Ayuda</h4>
            <p>• Respira profundo 3 veces cuando sientas ansiedad.</p>
            <p>• Escribe todo lo que sientes sin juzgarte.</p>
            <p>• Recuerda que eres una persona valiosa.</p>

            <h4>Historial de Sesión</h4>
            <div id="historial-lista" style="font-size: 11px; color: #666; max-height: 100px; overflow-y: auto; background: #f9f9f9; padding: 5px; border-radius: 5px;">
                Aún no hay mensajes...
            </div>

            <h4>Juegos Relajantes (Negro)</h4>
            <button class="btn btn-game" onclick="window.open('poki.com')">Zen Blocks</button>
            <button class="btn btn-game" onclick="window.open('poki.com')">Color Pixel</button>
            <button class="btn btn-game" onclick="window.open('poki.com')">Laberinto</button>
            
            <h4>Temas Visuales</h4>
            <button class="btn" style="background:linear-gradient(to right, #fff, #ff66b2, #ff00ff); color:black" onclick="setTheme('fresa')">Fresa Roja</button>
            <button class="btn" style="background:linear-gradient(to right, #ffff00, #ff8000, #ff0000); color:black" onclick="setTheme('lava')">Lava</button>
            <button class="btn" style="background:linear-gradient(to right, #0000ff, #00ff80, #000000)" onclick="setTheme('marino')">Marino</button>
        </div>
    </div>

    <div class="exit-container">
        <button class="menu-btn" onclick="location.reload()">Cerrar Sesión ✖</button>
    </div>

    <div id="chat-window">
        <div class="msg ai-msg">Hola. He verificado tus datos. Estoy aquí para acompañarte hoy, 25 de diciembre de 2025. Cuéntame qué sientes.</div>
    </div>

    <div class="input-area">
        <input type="text" id="user-input" placeholder="Suelte su carga aquí...">
        <button class="btn" style="width:auto; margin:0; padding:0 25px" onclick="sendMessage()">Enviar</button>
    </div>
</div>

<script>
    var userData = JSON.parse(localStorage.getItem('userDB')) || null;
    var chatHistory = [];

    window.onload = () => {
        const savedG = localStorage.getItem('chatTheme');
        const savedA = localStorage.getItem('chatAccent');
        if(savedG && savedA) applyVisuals(savedG, savedA);
    };

    function applyVisuals(grad, accent) {
        document.documentElement.style.setProperty('--main-bg', grad);
        document.documentElement.style.setProperty('--accent', accent);
        document.getElementById('auth-screen').style.background = grad;
        document.getElementById('chat-interface').style.background = grad;
    }

    function showRegister() {
        document.getElementById('login-view').classList.add('hidden');
        document.getElementById('register-view').classList.remove('hidden');
    }

    function validateStep(current, next) {
        let ok = true;
        if(current === 1 && document.getElementById('reg-name').value.trim().length < 3) ok = false;
        if(current === 2 && (!document.getElementById('reg-age').value || !document.getElementById('reg-sex').value)) ok = false;
        if(current === 3 && (!document.getElementById('reg-email').value.includes('@') || document.getElementById('reg-tel').value.length < 7)) ok = false;
        if(!ok) { alert("Complete todos los campos obligatorios."); return; }
        document.querySelectorAll('#register-view > div').forEach(d => d.classList.add('hidden'));
        document.getElementById('reg-step-' + next).classList.remove('hidden');
    }

    function finishRegister() {
        const p1 = document.getElementById('reg-p1').value;
        if(p1 !== document.getElementById('reg-p2').value || p1.length < 5) { alert("Claves inválidas."); return; }
        userData = {
            name: document.getElementById('reg-name').value.trim(),
            age: document.getElementById('reg-age').value,
            sex: document.getElementById('reg-sex').value,
            email: document.getElementById('reg-email').value.trim(),
            tel: document.getElementById('reg-tel').value.trim(),
            pass: p1
        };
        localStorage.setItem('userDB', JSON.stringify(userData));
        alert("¡Registro Exitoso!");
        location.reload();
    }

    function attemptLogin() {
        const uInput = document.getElementById('log-user').value.trim().toLowerCase();
        const pInput = document.getElementById('log-pass').value;
        if(userData && (uInput === userData.email.toLowerCase() || uInput === userData.name.toLowerCase()) && pInput === userData.pass) {
            document.getElementById('auth-screen').classList.add('hidden');
            document.getElementById('chat-interface').style.display = 'flex';
            loadProfile();
        } else { alert("Datos incorrectos."); }
    }

    function loadProfile() {
        document.getElementById('m-nombre').innerHTML = `<b>Nombre:</b> ${userData.name}`;
        document.getElementById('m-edad').innerHTML = `<b>Edad:</b> ${userData.age}`;
        document.getElementById('m-sexo').innerHTML = `<b>Sexo:</b> ${userData.sex}`;
        document.getElementById('m-tel').innerHTML = `<b>Tel:</b> ${userData.tel}`;
        document.getElementById('m-correo').innerHTML = `<b>Correo:</b> ${userData.email}`;
    }

    function toggleMenu() {
        const m = document.getElementById('menu-dropdown');
        m.style.display = (m.style.display === 'block') ? 'none' : 'block';
    }

    function setTheme(theme) {
        let g = "", a = "";
        if(theme === 'fresa') { g = "linear-gradient(135deg, #ffffff, #ff66b2, #ff00ff)"; a = "#ff00ff"; }
        else if(theme === 'lava') { g = "linear-gradient(135deg, #ffff00, #ff8000, #ff0000)"; a = "#ff8000"; }
        else if(theme === 'marino') { g = "linear-gradient(135deg, #0000ff, #00ff80, #000000)"; a = "#00ff80"; }
        applyVisuals(g, a);
        localStorage.setItem('chatTheme', g);
        localStorage.setItem('chatAccent', a);
    }

    function sendMessage() {
        const input = document.getElementById('user-input');
        const text = input.value.trim();
        if(!text) return;
        
        const win = document.getElementById('chat-window');
        win.innerHTML += `<div class="msg user-msg">${text}</div>`;
        input.value = "";
        win.scrollTop = win.scrollHeight;

        // Guardar en historial
        chatHistory.push("Tú: " + text);
        updateHistoryUI();

        setTimeout(() => {
            const aiResp = "Entiendo perfectamente. No estás solo/a en este proceso de 2025. Respira y confía.";
            win.innerHTML += `<div class="msg ai-msg">${aiResp}</div>`;
            win.scrollTop = win.scrollHeight;
            chatHistory.push("IA: " + aiResp);
            updateHistoryUI();
        }, 1000);
    }

    function updateHistoryUI() {
        const hLista = document.getElementById('historial-lista');
        hLista.innerHTML = chatHistory.map(line => `<div>${line}</div>`).join("");
    }
</script>
</body>
</html><!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Terapia AI - Sistema Integral 2025</title>
    <style>
        :root {
            --accent: #ff007f;
            --main-bg: linear-gradient(135deg, #ff75c3, #702283, #000000);
        }
        
        body, html { margin: 0; padding: 0; height: 100%; font-family: 'Segoe UI', sans-serif; color: white; overflow: hidden; }

        .main-wrapper {
            height: 100vh; width: 100%;
            background: var(--main-bg);
            background-size: 400% 400%; animation: gradientBG 15s ease infinite;
            display: flex; justify-content: center; align-items: center;
            transition: background 0.8s ease;
        }
        @keyframes gradientBG { 0% { background-position: 0% 50%; } 50% { background-position: 100% 50%; } 100% { background-position: 0% 50%; } }

        .container-box {
            text-align: center; background: rgba(0, 0, 0, 0.8); padding: 30px 40px;
            border-radius: 25px; backdrop-filter: blur(15px); border: 2px solid var(--accent);
            width: 420px; box-shadow: 0 20px 50px rgba(0,0,0,0.7); z-index: 10;
        }

        #chat-interface {
            display: none; width: 100%; height: 100vh; flex-direction: column;
            background: var(--main-bg); position: relative;
            transition: background 0.8s ease;
        }

        .menu-container { position: absolute; top: 20px; left: 20px; z-index: 1000; }
        .exit-container { position: absolute; top: 20px; right: 20px; z-index: 1000; }
        
        .menu-btn { background: rgba(0,0,0,0.5); border: 2px solid var(--accent); color: white; padding: 10px 20px; cursor: pointer; border-radius: 20px; backdrop-filter: blur(5px); }
        
        .menu-content {
            display: none; position: absolute; left: 0; background: white; min-width: 280px;
            box-shadow: 0px 8px 16px rgba(0,0,0,0.5); border-radius: 15px; padding: 15px; margin-top: 10px; color: #333;
            max-height: 75vh; overflow-y: auto; border: 3px solid var(--accent);
        }

        .menu-content h4 { margin: 15px 0 5px; border-bottom: 1px solid #ddd; color: var(--accent); text-transform: uppercase; font-size: 12px; }
        .menu-content p { font-size: 13px; margin: 8px 0; color: #444; text-align: left; }

        /* Botones de juegos fijos en negro */
        .btn-game { background: #000 !important; color: white !important; border: 1px solid #333; }

        .hidden { display: none !important; }
        
        input, select {
            width: 100%; padding: 12px; background: #000; color: white; border: 2px solid var(--accent);
            border-radius: 30px; text-align: center; outline: none; margin-bottom: 10px; box-sizing: border-box;
        }
        
        .btn {
            padding: 10px; color: white; border: none; border-radius: 30px; font-weight: bold;
            cursor: pointer; width: 100%; background: var(--accent);
            margin-top: 5px; text-transform: uppercase; transition: 0.3s; font-size: 11px;
        }

        #chat-window { flex: 1; overflow-y: auto; padding: 80px 20px 20px; display: flex; flex-direction: column; gap: 15px; }
        .msg { max-width: 80%; padding: 12px 18px; border-radius: 20px; font-size: 15px; line-height: 1.4; border: 1px solid rgba(255,255,255,0.1); }
        .ai-msg { align-self: flex-start; background: rgba(255, 255, 255, 0.9); color: #333; }
        .user-msg { align-self: flex-end; background: var(--accent); color: white; font-weight: bold; }

        .input-area { padding: 20px; background: rgba(0,0,0,0.6); display: flex; gap: 10px; backdrop-filter: blur(10px); border-top: 1px solid var(--accent); }
        .input-area input { flex: 1; margin-bottom: 0; text-align: left; padding-left: 20px; }
    </style>
</head>
<body>

<div class="main-wrapper" id="auth-screen">
    <div class="container-box">
        <h1>TERAPIA AI</h1>
        <div id="login-view">
            <input type="text" id="log-user" placeholder="Correo o Usuario">
            <input type="password" id="log-pass" placeholder="Contraseña">
            <button class="btn" onclick="attemptLogin()">Entrar</button>
            <button class="btn" style="background:transparent; border:1px solid white" onclick="showRegister()">Registro</button>
        </div>

        <div id="register-view" class="hidden">
            <div id="reg-step-1">
                <label>Nombre</label>
                <input type="text" id="reg-name">
                <button class="btn" onclick="validateStep(1, 2)">Siguiente</button>
            </div>
            <div id="reg-step-2" class="hidden">
                <label>Edad y Sexo</label>
                <input type="number" id="reg-age" placeholder="Edad">
                <select id="reg-sex">
                    <option value="">Sexo...</option>
                    <option value="Femenino">Femenino</option>
                    <option value="Masculino">Masculino</option>
                </select>
                <button class="btn" onclick="validateStep(2, 3)">Siguiente</button>
            </div>
            <div id="reg-step-3" class="hidden">
                <label>Contacto</label>
                <input type="email" id="reg-email" placeholder="correo@ejemplo.com">
                <input type="tel" id="reg-tel" placeholder="Teléfono">
                <button class="btn" onclick="validateStep(3, 4)">Siguiente</button>
            </div>
            <div id="reg-step-4" class="hidden">
                <label>Seguridad</label>
                <input type="password" id="reg-p1" placeholder="Clave">
                <input type="password" id="reg-p2" placeholder="Confirmar">
                <button class="btn" onclick="finishRegister()">Finalizar</button>
            </div>
            <button class="btn" style="background:#444; margin-top:15px" onclick="location.reload()">Cancelar</button>
        </div>
    </div>
</div>

<div id="chat-interface">
    <div class="menu-container">
        <button class="menu-btn" onclick="toggleMenu()">Opciones ☰</button>
        <div id="menu-dropdown" class="menu-content">
            <h4>Perfil Personal</h4>
            <p id="m-nombre"></p><p id="m-edad"></p><p id="m-sexo"></p><p id="m-tel"></p><p id="m-correo"></p>
            
            <h4>Ayuda</h4>
            <p>• Respira profundo 3 veces cuando sientas ansiedad.</p>
            <p>• Escribe todo lo que sientes sin juzgarte.</p>
            <p>• Recuerda que eres una persona valiosa.</p>

            <h4>Historial de Sesión</h4>
            <div id="historial-lista" style="font-size: 11px; color: #666; max-height: 100px; overflow-y: auto; background: #f9f9f9; padding: 5px; border-radius: 5px;">
                Aún no hay mensajes...
            </div>

            <h4>Juegos Relajantes (Negro)</h4>
            <button class="btn btn-game" onclick="window.open('poki.com')">Zen Blocks</button>
            <button class="btn btn-game" onclick="window.open('poki.com')">Color Pixel</button>
            <button class="btn btn-game" onclick="window.open('poki.com')">Laberinto</button>
            
            <h4>Temas Visuales</h4>
            <button class="btn" style="background:linear-gradient(to right, #fff, #ff66b2, #ff00ff); color:black" onclick="setTheme('fresa')">Fresa Roja</button>
            <button class="btn" style="background:linear-gradient(to right, #ffff00, #ff8000, #ff0000); color:black" onclick="setTheme('lava')">Lava</button>
            <button class="btn" style="background:linear-gradient(to right, #0000ff, #00ff80, #000000)" onclick="setTheme('marino')">Marino</button>
        </div>
    </div>

    <div class="exit-container">
        <button class="menu-btn" onclick="location.reload()">Cerrar Sesión ✖</button>
    </div>

    <div id="chat-window">
        <div class="msg ai-msg">Hola. He verificado tus datos. Estoy aquí para acompañarte hoy, 25 de diciembre de 2025. Cuéntame qué sientes.</div>
    </div>

    <div class="input-area">
        <input type="text" id="user-input" placeholder="Suelte su carga aquí...">
        <button class="btn" style="width:auto; margin:0; padding:0 25px" onclick="sendMessage()">Enviar</button>
    </div>
</div>

<script>
    let userData = JSON.parse(localStorage.getItem('userDB')) || null;
    let chatHistory = [];

    window.onload = () => {
        const savedG = localStorage.getItem('chatTheme');
        const savedA = localStorage.getItem('chatAccent');
        if(savedG && savedA) applyVisuals(savedG, savedA);
    };

    function applyVisuals(grad, accent) {
        document.documentElement.style.setProperty('--main-bg', grad);
        document.documentElement.style.setProperty('--accent', accent);
        document.getElementById('auth-screen').style.background = grad;
        document.getElementById('chat-interface').style.background = grad;
    }

    function showRegister() {
        document.getElementById('login-view').classList.add('hidden');
        document.getElementById('register-view').classList.remove('hidden');
    }

    function validateStep(current, next) {
        let ok = true;
        if(current === 1 && document.getElementById('reg-name').value.trim().length < 3) ok = false;
        if(current === 2 && (!document.getElementById('reg-age').value || !document.getElementById('reg-sex').value)) ok = false;
        if(current === 3 && (!document.getElementById('reg-email').value.includes('@') || document.getElementById('reg-tel').value.length < 7)) ok = false;
        if(!ok) { alert("Complete todos los campos obligatorios."); return; }
        document.querySelectorAll('#register-view > div').forEach(d => d.classList.add('hidden'));
        document.getElementById('reg-step-' + next).classList.remove('hidden');
    }

    function finishRegister() {
        const p1 = document.getElementById('reg-p1').value;
        if(p1 !== document.getElementById('reg-p2').value || p1.length < 5) { alert("Claves inválidas."); return; }
        userData = {
            name: document.getElementById('reg-name').value.trim(),
            age: document.getElementById('reg-age').value,
            sex: document.getElementById('reg-sex').value,
            email: document.getElementById('reg-email').value.trim(),
            tel: document.getElementById('reg-tel').value.trim(),
            pass: p1
        };
        localStorage.setItem('userDB', JSON.stringify(userData));
        alert("¡Registro Exitoso!");
        location.reload();
    }

    function attemptLogin() {
        const uInput = document.getElementById('log-user').value.trim().toLowerCase();
        const pInput = document.getElementById('log-pass').value;
        if(userData && (uInput === userData.email.toLowerCase() || uInput === userData.name.toLowerCase()) && pInput === userData.pass) {
            document.getElementById('auth-screen').classList.add('hidden');
            document.getElementById('chat-interface').style.display = 'flex';
            loadProfile();
        } else { alert("Datos incorrectos."); }
    }

    function loadProfile() {
        document.getElementById('m-nombre').innerHTML = `<b>Nombre:</b> ${userData.name}`;
        document.getElementById('m-edad').innerHTML = `<b>Edad:</b> ${userData.age}`;
        document.getElementById('m-sexo').innerHTML = `<b>Sexo:</b> ${userData.sex}`;
        document.getElementById('m-tel').innerHTML = `<b>Tel:</b> ${userData.tel}`;
        document.getElementById('m-correo').innerHTML = `<b>Correo:</b> ${userData.email}`;
    }

    function toggleMenu() {
        const m = document.getElementById('menu-dropdown');
        m.style.display = (m.style.display === 'block') ? 'none' : 'block';
    }

    function setTheme(theme) {
        let g = "", a = "";
        if(theme === 'fresa') { g = "linear-gradient(135deg, #ffffff, #ff66b2, #ff00ff)"; a = "#ff00ff"; }
        else if(theme === 'lava') { g = "linear-gradient(135deg, #ffff00, #ff8000, #ff0000)"; a = "#ff8000"; }
        else if(theme === 'marino') { g = "linear-gradient(135deg, #0000ff, #00ff80, #000000)"; a = "#00ff80"; }
        applyVisuals(g, a);
        localStorage.setItem('chatTheme', g);
        localStorage.setItem('chatAccent', a);
    }

    function sendMessage() {
        const input = document.getElementById('user-input');
        const text = input.value.trim();
        if(!text) return;
        
        const win = document.getElementById('chat-window');
        win.innerHTML += `<div class="msg user-msg">${text}</div>`;
        input.value = "";
        win.scrollTop = win.scrollHeight;

        // Guardar en historial
        chatHistory.push("Tú: " + text);
        updateHistoryUI();

        setTimeout(() => {
            const aiResp = "Entiendo perfectamente. No estás solo/a en este proceso de 2025. Respira y confía.";
            win.innerHTML += `<div class="msg ai-msg">${aiResp}</div>`;
            win.scrollTop = win.scrollHeight;
            chatHistory.push("IA: " + aiResp);
            updateHistoryUI();
        }, 1000);
    }

    function updateHistoryUI() {
        const hLista = document.getElementById('historial-lista');
        hLista.innerHTML = chatHistory.map(line => `<div>${line}</div>`).join("");
    }
</script>
</body>
</html>
